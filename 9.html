<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Пункт 9</title>

    <!-- Подключаем API -->
    <!-- Подробнее https://tech.yandex.ru/maps/doc/jsapi/2.1/dg/concepts/load-docpage/ -->
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
    <!-- Подключаем jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <!-- https://github.com/yandex/mapsapi-area -->
    <script src="https://yastatic.net/s3/mapsapi-jslibs/area/0.0.1/util.calculateArea.min.js" type="text/javascript"></script>
</head>
<body>



<script>

    // Функция ymaps.ready() будет вызвана, когда
    // загрузятся все компоненты API, а также когда будет готово DOM-дерево.
    ymaps.ready(init);

    function init() {
        // Создание карты.
        // https://tech.yandex.ru/maps/doc/jsapi/2.1/dg/concepts/map-docpage/
        var myMap = new ymaps.Map("map", {
            // Координаты центра карты.
            // Порядок по умолчнию: «широта, долгота».
            center: [55.76, 37.64],
            // Уровень масштабирования. Допустимые значения:
            // от 0 (весь мир) до 19.
            zoom: 12,
            // Элементы управления
            // https://tech.yandex.ru/maps/doc/jsapi/2.1/dg/concepts/controls/standard-docpage/
            controls: [
                'zoomControl', // Ползунок масштаба
            ]
        });

        // Добавление метки
        // https://tech.yandex.ru/maps/doc/jsapi/2.1/ref/reference/Placemark-docpage/
        var myPlacemark = new ymaps.Placemark([55.76, 37.64], {}, {
            'preset': 'islands#greenCircleDotIcon'
        });

        // После того как метка была создана, добавляем её на карту.
        myMap.geoObjects.add(myPlacemark);

        /**
         * Рисуем квадратый полигон шириной 5000 метров с центром в месте установки метки
         ***************************************************************
         */
        // Определяем координаты вершин ломаных, определяющих внешнюю и внутренние границы многоугольника
        var polygonSadovoeRing = [[37.582321,55.747169],[37.582435,55.747935999999996],[37.582525,55.748554999999996],[37.582539,55.748649],[37.582612,55.74912],[37.582736,55.749632999999996],[37.582783,55.749873],[37.582971,55.75103],[37.583137,55.751996999999996],[37.583155999999995,55.752095999999995],[37.583179,55.752213999999995],[37.583196,55.752306999999995],[37.583238,55.75253],[37.583261,55.752652],[37.583284,55.752769],[37.5833,55.752855],[37.583317,55.752942999999995],[37.583487999999996,55.753969999999995],[37.583615,55.754645999999994],[37.583701,55.755103],[37.583901,55.756093],[37.583962,55.756477999999994],[37.584047,55.757034],[37.58407,55.757239],[37.584114,55.757456],[37.584159,55.757670999999995],[37.584289,55.758227999999995],[37.584374,55.758545],[37.584444999999995,55.758744],[37.584472,55.758801999999996],[37.584539,55.758947],[37.584588,55.759046999999995],[37.584666,55.759212],[37.584764,55.7594],[37.584937,55.759698],[37.584962,55.759738],[37.585066,55.759899999999995],[37.585406,55.76041],[37.58556,55.760639999999995],[37.585757,55.760909],[37.585802,55.760968999999996],[37.586242,55.761568],[37.586739,55.762211],[37.586788,55.762273],[37.586954,55.762485999999996],[37.587376,55.763028999999996],[37.587497,55.76318],[37.587565999999995,55.763265],[37.587773,55.763504999999995],[37.588056,55.763821],[37.588325999999995,55.764094],[37.588647,55.764401],[37.588856,55.764587999999996],[37.589061,55.764768],[37.589359,55.765015],[37.589568,55.765178999999996],[37.589752,55.765319],[37.590064999999996,55.765544],[37.590603,55.765938],[37.590841999999995,55.766107],[37.591622,55.766662999999994],[37.592893,55.767565999999995],[37.593258,55.767782],[37.593537,55.767955],[37.594215999999996,55.768404],[37.594457999999996,55.768556],[37.59471,55.768710999999996],[37.594913,55.768834],[37.595296999999995,55.769062],[37.595441,55.769147999999994],[37.595501,55.76918],[37.59563,55.769248999999995],[37.595849,55.769366999999995],[37.596044,55.769473],[37.596236,55.76958],[37.596348,55.769642],[37.596517,55.769737],[37.596681,55.769819],[37.597518,55.770216],[37.59758,55.770244999999996],[37.597643,55.770278],[37.598115,55.770497],[37.59849,55.770655999999995],[37.599196,55.770919],[37.599592,55.771058999999994],[37.599886999999995,55.771162999999994],[37.600304,55.771304],[37.600933999999995,55.771511],[37.601538,55.771693],[37.604175999999995,55.772462999999995],[37.604403999999995,55.772527],[37.604451,55.772538],[37.604495,55.772548],[37.605021,55.772659],[37.605267999999995,55.772703],[37.605785999999995,55.77279],[37.606708999999995,55.772929999999995],[37.607503,55.773044999999996],[37.608216999999996,55.773134999999996],[37.60885,55.773196999999996],[37.609006,55.773212],[37.610555,55.773373],[37.611714,55.773457],[37.612418999999996,55.773491],[37.613096,55.773526],[37.613761,55.773531],[37.614222999999996,55.773534],[37.61512,55.773545],[37.618376,55.773664],[37.618556999999996,55.773671],[37.618942,55.773686999999995],[37.619594,55.773714999999996],[37.620184,55.773736],[37.620360999999995,55.773740999999994],[37.620652,55.773748999999995],[37.621105,55.773753],[37.621522999999996,55.773756],[37.621719999999996,55.773758],[37.622049,55.773756999999996],[37.622412,55.773753],[37.622893999999995,55.773748],[37.623309,55.773737999999994],[37.624094,55.773713],[37.624649,55.773686999999995],[37.625368,55.773646],[37.625875,55.773612],[37.626078,55.773598],[37.626636,55.773557999999994],[37.626942,55.773533],[37.627477999999996,55.773483],[37.627506,55.773481],[37.627686,55.773461999999995],[37.628758999999995,55.773331],[37.629244,55.773267],[37.630178,55.773136],[37.630472999999995,55.773092],[37.631198999999995,55.772991999999995],[37.631699,55.772923999999996],[37.632252,55.772850999999996],[37.632292,55.772845],[37.632418,55.772831999999994],[37.63284,55.772783],[37.633739999999996,55.772681],[37.634688,55.772574],[37.635051,55.772531],[37.635608999999995,55.772476999999995],[37.635915,55.772441],[37.636185999999995,55.772403],[37.636969,55.772275],[37.637296,55.772217],[37.637375999999996,55.7722],[37.637705,55.772133],[37.638084,55.772047],[37.638445,55.771958999999995],[37.638963,55.77182],[37.639046,55.771798],[37.639302,55.771722],[37.642466999999996,55.770742],[37.642748999999995,55.770655999999995],[37.643653,55.770393999999996],[37.643771,55.770359],[37.643906,55.770317999999996],[37.644469,55.770146999999994],[37.645787999999996,55.769746],[37.645976,55.769692],[37.646226999999996,55.76963],[37.646681,55.769518999999995],[37.647064,55.769424],[37.648016,55.769189999999995],[37.64841,55.769093],[37.648964,55.768952],[37.649164,55.768898],[37.649339999999995,55.768848999999996],[37.649528,55.768789],[37.649662,55.768743],[37.64975,55.76871],[37.649829,55.768674],[37.649919,55.768632],[37.650002,55.768587],[37.650197,55.768457999999995],[37.650329,55.768364999999996],[37.650943,55.767914],[37.65186,55.767241],[37.652231,55.766968999999996],[37.652285,55.766926999999995],[37.652761,55.766577],[37.653318,55.766203],[37.655553999999995,55.764706],[37.656044,55.764382999999995],[37.656168,55.764294],[37.656236,55.76424],[37.656313,55.764171],[37.656388,55.764095999999995],[37.656419,55.76406],[37.656468,55.763996],[37.656541,55.763889999999996],[37.656607,55.76378],[37.656836999999996,55.763341999999994],[37.656968,55.763076],[37.657126,55.762753],[37.657213999999996,55.762566],[37.657277,55.762415],[37.657379,55.762139999999995],[37.657430999999995,55.76199],[37.657527,55.76164],[37.657612,55.761314],[37.657664,55.761029],[37.657742,55.759882],[37.657785,55.759356999999994],[37.657812,55.75906],[37.657845,55.758517],[37.657848,55.758429],[37.657848,55.758348999999995],[37.657851,55.758128],[37.657838999999996,55.757777],[37.657813,55.757371],[37.657748999999995,55.756902999999994],[37.657681,55.756524999999996],[37.657651,55.756381],[37.657593,55.756142999999994],[37.65755,55.755987999999995],[37.65752,55.755882],[37.657492,55.755793],[37.657432,55.755615999999996],[37.657271,55.755145],[37.657151999999996,55.754813999999996],[37.657075,55.75461],[37.656290999999996,55.752765999999994],[37.656225,55.752607999999995],[37.656195,55.752527],[37.656177,55.752466999999996],[37.656161,55.752396999999995],[37.656148,55.752320999999995],[37.65614,55.752246],[37.656081,55.751182],[37.656068999999995,55.750876999999996],[37.656048,55.750752],[37.656023,55.750598999999994],[37.656017,55.750509],[37.656015,55.750476],[37.656011,55.750389999999996],[37.656006,55.750301],[37.655981,55.750001999999995],[37.655968,55.749891],[37.655961,55.749823],[37.655905,55.749313],[37.655895,55.749190999999996],[37.655853,55.749033999999995],[37.655823999999996,55.748889999999996],[37.655812,55.74881],[37.655795999999995,55.748677],[37.655752,55.748315],[37.655694,55.747865],[37.655622,55.747307],[37.655605,55.747173999999994],[37.655586,55.747046],[37.655570999999995,55.746927],[37.655511,55.746455999999995],[37.655369,55.74549],[37.655363,55.745445],[37.655313,55.745093],[37.655211,55.744398],[37.655187999999995,55.744267],[37.655147,55.744066999999994],[37.655083999999995,55.743817],[37.655027,55.74362],[37.654896,55.743204],[37.65483,55.743026],[37.654768,55.742846],[37.654705,55.742703999999996],[37.654658999999995,55.742605],[37.654644999999995,55.74258],[37.654582999999995,55.74247],[37.654484,55.742314],[37.654379,55.742141999999994],[37.65427,55.741985],[37.654211,55.741906],[37.654135,55.741803999999995],[37.653878,55.741526],[37.653583999999995,55.741242],[37.653455,55.741127999999996],[37.65329,55.740994],[37.652864,55.740665],[37.652674,55.740525],[37.652483,55.740395],[37.652298,55.740269],[37.652139,55.740176],[37.652113,55.740159],[37.650936,55.739346],[37.650279999999995,55.738884999999996],[37.650152999999996,55.738772],[37.649786,55.738512],[37.649167999999996,55.738077999999994],[37.648592,55.737676],[37.648496,55.737606],[37.648272,55.737452],[37.648033,55.737283999999995],[37.647146,55.736666],[37.646128,55.735948],[37.64599,55.735851],[37.645707,55.735656999999996],[37.645663,55.735625999999996],[37.644695999999996,55.734963],[37.644193,55.734618999999995],[37.644116,55.73457],[37.643721,55.734334999999994],[37.643505999999995,55.734221],[37.642395,55.733652],[37.642236,55.733568],[37.641771,55.733306],[37.64174,55.733289],[37.641695,55.733261999999996],[37.641562,55.733177999999995],[37.641422,55.733095],[37.641065,55.732893999999995],[37.640060999999996,55.732330999999995],[37.640012999999996,55.732302],[37.639887,55.732228],[37.639745999999995,55.732141999999996],[37.639533,55.732012],[37.639247999999995,55.731849],[37.639168999999995,55.731809],[37.638988999999995,55.731716],[37.638802999999996,55.731624],[37.638571,55.731527],[37.638338999999995,55.731443],[37.638025,55.731342999999995],[37.63773,55.731252],[37.637336,55.731153],[37.636975,55.731071],[37.63682,55.731033999999994],[37.63644,55.730962],[37.636358,55.730948],[37.636224999999996,55.730928],[37.635964,55.730891],[37.635706,55.730855],[37.635396,55.730816999999995],[37.634785,55.730747],[37.634038,55.730661],[37.633953999999996,55.730653999999994],[37.633175,55.730571999999995],[37.631477,55.730387],[37.631243999999995,55.730362],[37.629338,55.730174999999996],[37.628177,55.730053999999996],[37.628153,55.730050999999996],[37.626117,55.729836999999996],[37.626039,55.729828],[37.625805,55.729805999999996],[37.625679999999996,55.729794],[37.625495,55.729777],[37.625259,55.729769],[37.624179999999996,55.729729],[37.62414,55.729727],[37.624033,55.729723],[37.623732,55.729712],[37.623512999999996,55.729707],[37.623211,55.729699999999994],[37.623151,55.729696999999994],[37.621449999999996,55.729676],[37.620025,55.729656999999996],[37.618451,55.729633],[37.617847999999995,55.729625],[37.6173,55.729614999999995],[37.61624,55.729594],[37.615901,55.729589999999995],[37.615522,55.729591],[37.615176,55.729592999999994],[37.614554999999996,55.729608],[37.614466,55.729611999999996],[37.614277,55.729622],[37.614143,55.729631],[37.613986,55.729642999999996],[37.613856999999996,55.729651999999994],[37.613547,55.729682],[37.613237,55.729715999999996],[37.612854,55.729763],[37.612536,55.729799],[37.612277,55.729838],[37.612185,55.729851],[37.612003,55.729884999999996],[37.611945,55.729896],[37.611801,55.729924],[37.611675999999996,55.729949],[37.611367,55.730016],[37.61111,55.730073999999995],[37.610876,55.730129999999996],[37.610420999999995,55.730253999999995],[37.610107,55.730348],[37.608429,55.730895999999994],[37.606967999999995,55.731373999999995],[37.606635,55.731485],[37.606521,55.731525],[37.605672999999996,55.731790999999994],[37.604254,55.732254],[37.60346,55.732507999999996],[37.600877,55.733334],[37.600685999999996,55.733394],[37.600558,55.733433999999995],[37.600269999999995,55.733526999999995],[37.600225,55.733540999999995],[37.597753,55.734325],[37.597592999999996,55.734375],[37.597404,55.734438],[37.597232999999996,55.734491999999996],[37.597075,55.734539999999996],[37.594327,55.735397],[37.594234,55.735426],[37.594116,55.735464],[37.593472,55.735673],[37.59343,55.735687],[37.592873,55.735873],[37.592374,55.736039999999996],[37.592168,55.736109],[37.591659,55.736278],[37.591028,55.736501],[37.590387,55.736739],[37.589756,55.736985],[37.589332,55.737148999999995],[37.587686,55.737801999999995],[37.587247,55.737981999999995],[37.586648,55.738225],[37.586537,55.738273],[37.586431,55.738322],[37.586321,55.738378],[37.586214,55.738442],[37.586112,55.738512],[37.586026,55.738578999999994],[37.585965,55.738631],[37.585910999999996,55.738682],[37.585854999999995,55.738738999999995],[37.585813,55.738783999999995],[37.585778999999995,55.738825999999996],[37.585736,55.738882999999994],[37.585715,55.738909],[37.585659,55.738991999999996],[37.585553,55.739155999999994],[37.585428,55.739371],[37.585240999999996,55.739708],[37.585119999999996,55.739945],[37.584941,55.740319],[37.584827,55.740564],[37.584787999999996,55.740655999999994],[37.584308,55.741917],[37.584071,55.742546999999995],[37.583861,55.743120999999995],[37.583771999999996,55.743347],[37.583555,55.743818999999995],[37.583543,55.743846999999995],[37.583222,55.744569],[37.58286,55.745391999999995],[37.582817999999996,55.745492],[37.582668,55.745847999999995],[37.582405,55.74646],[37.582355,55.746604999999995],[37.582322999999995,55.746719999999996],[37.582304,55.746828],[37.582302999999996,55.746941],[37.582321,55.747169]];
        var x,y,newPolygonSadovoeRing = [];
        for(var i = 0; i < polygonSadovoeRing.length; i++) {
            x = polygonSadovoeRing[i][1];
            y = polygonSadovoeRing[i][0];
            newPolygonSadovoeRing.push([x,y]);
        }

        // Рисуем полигон
        // https://tech.yandex.ru/maps/doc/jsapi/2.1/ref/reference/Polygon-docpage/
        var myPolygon = new ymaps.Polygon([
            // Координаты внешнего контура
            newPolygonSadovoeRing,
            [] // Координаты внутреннего контура
        ], {}, {
            // Курсор в режиме добавления новых вершин.
            editorDrawingCursor: "crosshair",
            // Максимально допустимое количество вершин.
            editorMaxPoints: 10,
            fill: true, // Наличие заливки
            fillColor: '0066ff99', // Цвет заливки.
            strokeColor: '0000FF', // Цвет обводки.
            strokeWidth: 5, // Ширина обводки.

            // Убираем возможность добавлять внутренний контур в режиме редактирования
            editorMenuManager: function (t) {
                return t.filter(function (t) {
                    return "addInterior" !== t.id
                });
            }
        });

        myMap.geoObjects.add(myPolygon);

        // Включаем режим редактирования полигона
        $('#startDrawing').on('click', function () {
            myPolygon.editor.startDrawing();
        });

        // Отключаем режим редактирования полигона
        $('#stopDrawing').on('click', function () {
            myPolygon.editor.stopDrawing();
            myPolygon.editor.stopEditing();
        });

        // Определяем площадь полигона
        // Для расчета площади используется модуль mapsapi-area
        // https://github.com/yandex/mapsapi-area
        ymaps.ready(['util.calculateArea']).then(function () {

            $('#calculateArea').on('click', function() {

                // Вычисляем площадь геообъекта.
                var area = Math.round(ymaps.util.calculateArea(myPolygon));

                // Если площадь превышает 1 000 000 м², то приводим ее к км².
                if (area <= 1e6) {
                    area += ' м²';
                } else {
                    area = (area / 1e6).toFixed(3) + ' км²';
                }

                alert('Площадь полигона ' + area);
            });

        });
    }

</script>


<button id="startDrawing">Включить режим редактирования</button>
<button id="stopDrawing">Отключить режим редактирования</button>
<br>
<button id="calculateArea">Определить площадь полигона</button>

<!-- Создаём контейнер для карты -->
<div id="map" style="width: 100%; height: 300px"></div>
</body>
</html>